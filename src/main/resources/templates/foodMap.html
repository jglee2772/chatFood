<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/foodMap.css">
    <title>맛집 지도 - LunchBot</title>
    <!-- 네이버 지도 API -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=nobbsrg4m4"></script>
</head>
<body>

    <header>
        <div class="header-container">
            <p>LunchBot 오늘 뭐 먹을까?</p>
            <div class="input-group">
                <label for="search-food">음식 검색</label>
                <input type="text" id="search-food" name="search-food" placeholder="음식을 입력하세요">
            </div>
        </div>
    </header>

    <div class="main-wrapper">
        <div class="main-content">
            <div class="upper-content">
                <div class="upper-map" id="map"></div>
            </div>
            <div class="lower-content">
                <div class="short-info"></div>
                <div class="short-info"></div>
            </div>
        </div>
        <div class="right-side-content">

        </div>
    </div>
    
</body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
// 네이버 지도 초기화
function initMap() {
    // 기본 위치 (서울 강남역)
    const defaultPosition = new naver.maps.LatLng(37.4979, 127.0276);
    
    // 지도 옵션 설정
    const mapOptions = {
        center: defaultPosition,
        zoom: 15,
        mapTypeControl: true,
        mapTypeControlOptions: {
            style: naver.maps.MapTypeControlStyle.BUTTON,
            position: naver.maps.Position.TOP_RIGHT
        },
        zoomControl: true,
        zoomControlOptions: {
            style: naver.maps.ZoomControlStyle.SMALL,
            position: naver.maps.Position.TOP_LEFT
        }
    };
    
    // 지도 생성
    const map = new naver.maps.Map('map', mapOptions);
    
    // 기본 마커 추가 (강남역)
    const marker = new naver.maps.Marker({
        position: defaultPosition,
        map: map,
        title: '강남역'
    });
    
    // 마커 클릭 이벤트
    naver.maps.Event.addListener(marker, 'click', function() {
        alert('강남역 맛집을 찾아보세요!');
    });
    
    // 지도 클릭 이벤트 (새로운 위치에 마커 추가)
    naver.maps.Event.addListener(map, 'click', function(e) {
        const clickedPosition = e.latlng;
        
        // 새로운 마커 생성
        const newMarker = new naver.maps.Marker({
            position: clickedPosition,
            map: map,
            title: '클릭한 위치'
        });
        
        // 클릭한 위치의 주소 정보 가져오기 (선택사항)
        console.log('클릭한 위치:', clickedPosition.lat(), clickedPosition.lng());
    });
    
    // 음식 검색 기능
    const searchInput = document.getElementById('search-food');
    const searchButton = document.createElement('button');
    searchButton.textContent = '검색';
    searchButton.style.marginLeft = '10px';
    
    searchButton.addEventListener('click', function() {
        const searchTerm = searchInput.value.trim();
        if (searchTerm) {
            // 여기에 음식점 검색 로직 추가
            alert(`"${searchTerm}" 검색 기능을 구현해보세요!`);
        }
    });
    
    // 검색 버튼을 헤더에 추가
    const inputGroup = document.querySelector('.input-group');
    inputGroup.appendChild(searchButton);
}

// 페이지 로드 시 지도 초기화
document.addEventListener('DOMContentLoaded', function() {
    // 네이버 지도 API가 로드되었는지 확인
    if (typeof naver !== 'undefined' && naver.maps) {
        initMap();
    } else {
        console.error('네이버 지도 API가 로드되지 않았습니다.');
        alert('지도를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요.');
    }
});
</script>
</html>